# ===============================
# Application Setup
# ===============================
spring.application.name=payment-service

# ===============================
# Server Configuration
# ===============================
server.port=${SERVER_PORT:8084}

# ===============================
# MySQL Database Configuration
# ===============================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===============================
# JPA Configuration
# ===============================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# ===============================
# RabbitMQ Connection (Spring)
# ===============================
spring.rabbitmq.host=${SPRING_RABBITMQ_HOST:my-rabbit}
spring.rabbitmq.port=${SPRING_RABBITMQ_PORT:5672}
spring.rabbitmq.username=${SPRING_RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${SPRING_RABBITMQ_PASSWORD:guest}

# ===============================
# CORRECTION CRITIQUE : RabbitMQ Exchange Harmonise
# ===============================
# IMPORTANT : Tous les services (Booking, Payment) doivent utiliser le MEME exchange
# Exchange unique pour toute la plateforme de location
rabbitmq.exchange=${RABBITMQ_EXCHANGE:rental.exchange}

# ===============================
# RabbitMQ Routing Keys - PAYMENT SERVICE
# ===============================
# Evenements PUBLIES par Payment Service
rabbitmq.routing-key.confirmed=payment.confirmed
rabbitmq.routing-key.failed=payment.failed

# ===============================
# RabbitMQ Queues - PAYMENT SERVICE
# ===============================
# Queue CONSOMMEE par Payment Service (messages venant de Booking Service)
rabbitmq.queue.booking-created=booking.created.queue

# Routing key pour ecouter les evenements de Booking Service
rabbitmq.routing-key.booking-created=booking.created

# ===============================
# Web3/Blockchain Configuration
# ===============================
web3.rpc.url=${WEB3_RPC_URL}
web3.contract.address=${WEB3_CONTRACT_ADDRESS}
web3.private.key=${WEB3_PRIVATE_KEY}

# ===============================
# Actuator (Health Checks)
# ===============================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ===============================
# Logging Configuration
# ===============================
logging.level.ma.fstt.paymentservice=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.springframework.amqp=INFO